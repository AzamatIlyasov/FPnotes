# erlang_notes

# erlang
функциональный язык программирования:
	- [Функциональное программирование — Википедия (wikipedia.org)](https://ru.wikipedia.org/wiki/%D0%A4%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)
	- [Функциональное программирование для всех / Хабр (habr.com)](https://habr.com/ru/post/142351/) )
	- [Функциональное программирование должно стать вашим приоритетом №1 в 2015 году / Хабр (habr.com)](https://habr.com/ru/post/383551/)
	- [SICP по-русски (sergeykhenkin.com)](http://sicp.sergeykhenkin.com/)
	
  
  что значит не императивный, т.е. не обычный как java/c# :) 
  	- [Императивное программирование — Википедия (wikipedia.org)](https://ru.wikipedia.org/wiki/%D0%98%D0%BC%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D0%BE%D0%B5_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)



изучаем erlang вместе с практическими курсами:
- [yzh44yzh/practical_erlang: Курс обучения Эрланг (github.com)](https://github.com/yzh44yzh/practical_erlang)
- [Курс "Эрланг на практике". Урок №1. Вступление, типы данных. - YouTube](https://www.youtube.com/watch?v=CA7n38XJW-o&list=PLe9JWZB7n2PPbf_rB0XOw7qINdJiHY9df&index=10)
- [Язык программирования ERLANG / Из врачей в программисты / Интервью с Lead Software Engineer - YouTube](https://www.youtube.com/watch?v=OKEwOA0wWkQ&t=4s)
- [FizzBuzz на Erlang - YouTube](https://www.youtube.com/watch?v=5VFRovcrOrc)
- [Lukas Larsson - Understanding the Erlang Scheduler - YouTube](https://www.youtube.com/watch?v=tBAM_N9qPno)
- [Эрланг для веб-разработки (1) -> Знакомство; / Хабр (habr.com)](https://habr.com/ru/post/273979/)
- 

## история erlang
- начало в 1985 by Ericsson
- выпуск в 1998
- SMP в 2006 : [Симметричная многопроцессорность — Википедия (wikipedia.org)](https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%BC%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D1%80%D0%BD%D0%BE%D1%81%D1%82%D1%8C)
- Open Telelecom Platform ([[otp]]) - единственный фреймворк языка: [Open Telecom Platform — Википедия (wikipedia.org)](https://ru.wikipedia.org/wiki/Open_Telecom_Platform)
- язык шлифуется - идет работа над текущими фичами
- новый язык [[elexir]] - в основном для веб. 


### плюсы и преимущества erlang
- **concurrency** - процессы легковесны, запускать можно десятки/сотни тысяч. Обмен между ними идет через посылку сообщений. У каждого свой mailbox. Каждый процесс не зависимо работает, асинхронно. Можно при необходимости синхронизировать - заблокировать выполнения ожидая кого-то/что-то. 
	Процессы:
		- Запуск 3-5мкс. 
		- Кол-во процессов
			- min: 1024
			- max: 2^27
			- default max: 2^18
- **fault tolerance** - не убиваемость, каждый процесс выполняется ассинхронно, данные при передаче копируются, у процесса нету доступа к принятым данным, работает со своей копией.
	Уровни защит:
		- try .. catch (*редко используется, т.к. есть лучшие способы*)
		- supervisor .. worker (*наблюдатель и процесс. Наблюдатель смотрит за процессом, если что то произошло логирует и перезапускает этот процесс*)
		- объединение узлов/nodes в кластер - резервирование (например в [[команды в faceplate]])
- **distribution** - распределенность
- **hote code upgrade** - обновление кода в боейвой системе с сохранением состояния (типа *load purge* в [[команды в faceplate|faceplate]])
- **Symmetric Multiprocessing** - правильная работа с многоядерными системами. Erlang расскидывает планировщик/свои процессы по каждому ядру. Началось в 2006 году. ([Симметричная многопроцессорность — Википедия (wikipedia.org)](https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%BC%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%87%D0%BD%D0%B0%D1%8F_%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D1%80%D0%BD%D0%BE%D1%81%D1%82%D1%8C))
- **Actor Model** - message passing , [Модель акторов — Википедия (wikipedia.org)](https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%B4%D0%B5%D0%BB%D1%8C_%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%BE%D0%B2) 
- **Garbage Collection** - 
- **Erlang Shell** - REPL console (Read [[dictionary|Eval]] Print Loop)
- **Tracing** - 
- **Soft Real Time** - 


## применение erlang
- [[faceplate]]
- ecomet : [vzroman/ecomet (github.com)](https://github.com/vzroman/ecomet)
- dlls : [vzroman/dlss: Distributed Log Structured Data Storage (github.com)](https://github.com/vzroman/dlss)
- WhastApp : [Архитектура WhatsApp, которую Facebook купил за $19 миллиардов / Хабр (habr.com)](https://habr.com/ru/post/276951/)
- Cowboy : 
- CoachDB : [CouchDB — Википедия (wikipedia.org)](https://ru.wikipedia.org/wiki/CouchDB)
- Riak : [Riak — веб-ориентированная система хранения данных / Хабр (habr.com)](https://habr.com/ru/post/75202/)
- [ejabberd XMPP Server with MQTT Broker & SIP Service](https://www.ejabberd.im/)


RabbitMQ : [RabbitMQ. Часть 1. Introduction. Erlang, AMQP / Хабр (habr.com)](https://habr.com/ru/post/488654/)


Дальше про типы данных читать тут: [[типы данных в erlang]]



## ссылки на habr про erlang - интересное

- [Erlang для IoT / Хабр (habr.com)](https://habr.com/ru/post/417245/)
- [What's all this fuss about Erlang? / Хабр (habr.com)](https://habr.com/ru/post/31546/)
- [Erlang. Что это, зачем, как и для кого. / Хабр (habr.com)](https://habr.com/ru/post/50028/)
- [Параллельное программирование для начинающих на ЯП Elixir / Erlang VM на примере задачи «конь Эйлера» / Хабр (habr.com)](https://habr.com/ru/post/233637/)



## интересное erlang

*точки, запятые, точки с запятыми — это все пришло из пролога и они все имеют особый смысл.
**, — это «и»
; — это «или»
. — конец предиката ну или чего там** :)*

*Эрланг хорош для первого знакомства тем, что на нем можно быстро написать то, что традиционных языках — весьма нетривиальная задача. Например, многопоточный сервер в десяток строк кода. Если и приврал в количестве строк, то самую малость.*

*присваивание — легко  
изменение — никак    
в большинстве случаев менять ничего не надо, достаточно грамотно разбить программу на отдельные функционалы, тогда и переменных меньше надо будет и программа правильнее в функциональном смысле.*

*в Эрланге нет переменных, есть только данные, которые можно именовать, что вводит в заблуждение императивщиков, которые видят аналогию с использованием переменных.*

*В двух словах поясню: проблема с java.util.concurrent и другими библиотеками с «классическим подходом» ( java как таковая тут особо не при чем, она в рамках этого подхода как минимум не хуже других) — это  
  
1) тяжеловесность потоков (создание нативного потока, переключение потоков — довольно тяжелая операция)  
2) много данных часто расшарено между потоками — императивный подход этому способствует, и из-за большого количества блокировок программа может простаивать и хреново масштабироваться на большое количество процессоров  
3) благодаря (2) нужно синхронизировать доступ к данным, а для этого используются такие весьма нетривиальные механизмы как мьютексы, condition variables, евенты и пр. При их использовании требуется немало усилий чтоб не допустить дедлоков и прочих приятных вещей, а отлаживать их нелегко.  
  
В эрланге предлагается для решения проблемы (1) использовать суперлегкие потоки; чтоб обойти (2) он функциональный (хотя не строго — эрланг создавали очень практичные люди, для решения практических задач). (3) решается засчет того что расшаренных данных практически нет (кроме БД и хэш-таблиц), а основной способ общения между потоками — через сообщения.  
  
Вообще говоря, это конечно создает и некоторые неудобства, и это не единственный способ решения этих проблем (см. еще Software Transactional Memory), но способ вполне рабочий и мощный.*